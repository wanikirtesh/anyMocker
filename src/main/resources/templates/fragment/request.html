<html lang="en" xmlns:th="https://www.thymeleaf.org">
<div class="card cardreq frm">
    <div class="row g-3 card-body">
        <div class="row g-3">
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblproductName" >Product Name</span>
                <input id="productName" th:value="${req.getProductName()}" name="produtName" type="text" class="form-control form-control-sm partUrl"
                       placeholder="Product name" aria-label="Product name" aria-describedby="lblproductName">
            </div>
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblmoduleName">Module Name</span>
                <input id="moduleName" th:value="${req.getModuleName()}" name="moduleName" type="text" class="form-control form-control-sm partUrl"
                       placeholder="Module name" aria-label="Module name"  aria-describedby="lblmoduleName">
            </div>
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblpersona">Persona</span>
                <input id="persona" th:value="${req.getPersonaName()}" name="persona" type="text" class="form-control form-control-sm partUrl" placeholder="Persona"
                       aria-label="Persona" aria-describedby="lblpersona">
            </div>
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblname">Request Name</span>
                <input id="name" name="name" th:value="${req.name}" type="text" class="form-control form-control-sm" placeholder="Request name"
                       aria-label="Request name" aria-describedby="lblname">
            </div>
        </div>
        <div class="row g-3">
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblprocessor">Processor Name</span>
                <input id="processor" th:value="${req.processor}" name="processor" type="text" class="form-control form-control-sm"
                       placeholder="Processor name" aria-label="Processor name" aria-describedby="lblprocessor">
            </div>
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblmethod">Method</span>
                <input th:value="${req.method}" id="method" name="method" type="text" class="form-control form-control-sm" placeholder="Method"
                       aria-label="Method" aria-describedby="lblmethod">
            </div>

            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblurl">Request URI</span>
                <input id="url" th:value="${req.url}" name="url" type="text" class="form-control form-control-sm" placeholder="Request URL"
                       aria-label="Request URI" aria-describedby="lblurl">
            </div>
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblfileName">Json File name</span>
                <input id="fileName" th:value="${req.fileName}" name="fileName" type="text" class="form-control form-control-sm"
                       placeholder="File name" aria-label="File name" aria-describedby="lblfileName">
            </div>
        </div>
        <div class="row g-3">
            <div class="col-md-3">
                <div class="form-check">
                    <input id="download" name="download" th:checked="${req.download}" class="form-check-input" type="checkbox">
                    <label class="form-check-label" for="download">
                        Download Fixture
                    </label>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-check">
                    <input id="grouping" th:checked="${req.grouping}" name="grouping" class="form-check-input" type="checkbox">
                    <label class="form-check-label" for="grouping">
                        Group Requests
                    </label>
                </div>
            </div>
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblpathParam">Path Parameters</span>
                <input id="pathParam" th:value="${#strings.listJoin(req.pathParam,',')}" name="pathParam" type="text" placeholder="Path parameters"
                       class="form-control form-control-sm" aria-label="File name" aria-describedby="lblpathParam">
            </div>
            <div class="input-group input-group-sm col col-mb-3">
                <span class="input-group-text" id="lblqueryParam">Query Parameters</span>
                <input id="queryParam" th:value="${#strings.listJoin(req.queryParam,',')}"  name="queryParam" type="text" placeholder="Query parameters"
                       class="form-control form-control-sm" aria-label="File name" aria-describedby="lblqueryParam">
            </div>
        </div>
        <div class="input-group input-group-sm col col-mb-12">
            <span class="input-group-text" id="lblmeta">Metadata</span>
            <input type="text" th:value="${#strings.listJoin(req.meta,',')}"  id="meta" name="meta" class="form-control form-control-sm" aria-describedby="lblmeta"></input>
        </div>
    </div>
</div>
<div style="margin-top: 10px" class="card cardreq">
    <div id="editor" th:text="${gScript}">
    </div>
</div>
<div style="margin-top: 10px;flex-direction: row;justify-content: space-evenly;">
    <button th:data-for="${req.name}" id="btnRqSave" class="btn btn-primary">Save</button>
    <button th:if="${req.download}" class="btn btn-primary">Download</button>
    <button class="btn btn-primary">Delete</button>
    <button class="btn btn-primary">Refresh</button>
    <button class="btn btn-primary">Create New from this</button>
</div>
<script>
    function load(){
        let elemEditor = document.getElementById('editor');
        let prefilledValue = elemEditor.innerHTML;
        elemEditor.innerText = '';
        elemEditor.style.height = (document.querySelector(".main-content").offsetHeight - document.querySelector(".frm").offsetHeight - 100) + "px";
        let editor;
        require.config({paths: {'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs'}});
        require(['vs/editor/editor.main'], function () {
            editor = monaco.editor.create(elemEditor, {
                value: prefilledValue,
                language: 'java'
            });
            editor.layout();
        })
        document.querySelector('#btnRqSave').addEventListener('click', function (event) {
            alert(event.target.dataset.for);
        })
    }
    load();
</script>
</html>